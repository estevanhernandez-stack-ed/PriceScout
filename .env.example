# ==============================================================================
# PriceScout - Environment Configuration (Azure-Ready)
# ==============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!
#
# Version: 1.0.0
# Last Updated: November 13, 2025
# Azure Deployment: Compatible with App Service Configuration
# ==============================================================================

# ------------------------------------------------------------------------------
# DEPLOYMENT ENVIRONMENT
# ------------------------------------------------------------------------------
# Options: development, staging, production
ENVIRONMENT=development

# Explicit Azure deployment flag (auto-detected if omitted)
# DEPLOYMENT_ENV=azure

# Enable debug mode for detailed logging and screenshots
# Options: true, false
DEBUG=false

# Logging level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO


# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# PostgreSQL connection string (for Azure or local PostgreSQL)
# Format: postgresql://username:password@host:port/database?sslmode=require
# DATABASE_URL=postgresql://pricescout_app:your_password@localhost:5432/pricescout_db

# OR use individual components:
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=pricescout_db
# POSTGRES_USER=pricescout_app
# POSTGRES_PASSWORD=your_secure_password

# Legacy SQLite paths (for local development)
# DB_PATH=./data/price_scout.db
# USER_DB_PATH=./users.db


# ------------------------------------------------------------------------------
# AZURE SERVICES
# ------------------------------------------------------------------------------

# Azure Key Vault URL (for production secrets)
# AZURE_KEY_VAULT_URL=https://pricescout-kv-prod.vault.azure.net/

# Azure Application Insights (monitoring and logging)
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://...
# APPINSIGHTS_INSTRUMENTATION_KEY=your-instrumentation-key

# Azure Storage (for file uploads, logs, backups)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...
# AZURE_STORAGE_CONTAINER=pricescout-data


# ------------------------------------------------------------------------------
# SECURITY SETTINGS
# ------------------------------------------------------------------------------

# Secret key for session encryption (CHANGE IN PRODUCTION!)
SECRET_KEY=dev-secret-key-change-in-production

# JWT secret key (if different from SECRET_KEY)
# JWT_SECRET_KEY=your-jwt-secret-key

# Session timeout in minutes
SESSION_TIMEOUT_MINUTES=60


# ------------------------------------------------------------------------------
# APPLICATION SETTINGS
# ------------------------------------------------------------------------------

# Application name and version
APP_NAME=PriceScout
APP_VERSION=1.0.0

# Web server configuration (Azure uses 8000, Streamlit default is 8501)
HOST=0.0.0.0
PORT=8000


# ------------------------------------------------------------------------------
# API KEYS
# ------------------------------------------------------------------------------

# OMDb API Key - Get yours at: https://www.omdbapi.com/apikey.aspx
# Free tier: 1,000 daily requests
OMDB_API_KEY=your_api_key_here


# ------------------------------------------------------------------------------
# CACHE SETTINGS
# ------------------------------------------------------------------------------

# Number of days before theater cache expires
CACHE_EXPIRATION_DAYS=7

# Theater cache file path (relative to app directory)
# CACHE_FILE=./app/theater_cache.json

# Redis cache (optional, for production scaling)
# REDIS_HOST=pricescout-redis.redis.cache.windows.net
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_SSL=true


# ------------------------------------------------------------------------------
# SCRAPING CONFIGURATION
# ------------------------------------------------------------------------------

# Playwright timeout (milliseconds)
PLAYWRIGHT_TIMEOUT=30000

# Headless mode for browser scraping
# Options: true (no browser window), false (visible browser)
PLAYWRIGHT_HEADLESS=true

# Enable debug screenshots on scraping failures
# Screenshots saved to: debug_snapshots/
CAPTURE_DEBUG_SCREENSHOTS=true

# Rate limiting
SCRAPER_DELAY_SECONDS=2.0
SCRAPER_MAX_RETRIES=3


# ------------------------------------------------------------------------------
# SCHEDULER CONFIGURATION
# ------------------------------------------------------------------------------

# Timezone for scheduled tasks
TZ=America/New_York


# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------

# Enable/disable application features
ENABLE_ADMIN_MODE=true
ENABLE_DATA_EXPORT=true
ENABLE_BULK_UPLOAD=true


# ------------------------------------------------------------------------------
# LEGACY SETTINGS (Backward Compatibility)
# ------------------------------------------------------------------------------

# These settings are maintained for backward compatibility
# New deployments should use the equivalents above

# SCRAPE_TIMEOUT=30  (use PLAYWRIGHT_TIMEOUT instead)
# SCRAPE_HEADLESS=true  (use PLAYWRIGHT_HEADLESS instead)
# DEBUG_MODE=false  (use DEBUG instead)
# SESSION_TIMEOUT=1800  (use SESSION_TIMEOUT_MINUTES instead)
# MAX_LOGIN_ATTEMPTS=5  (handled by app/users.py)
# LOGIN_LOCKOUT_DURATION=900  (handled by app/users.py)
# MIN_PASSWORD_LENGTH=8  (handled by app/security_config.py)
# REQUIRE_PASSWORD_COMPLEXITY=true  (handled by app/security_config.py)
# MAX_FILE_SIZE_MB=50  (use Streamlit config.toml instead)
# ENABLE_SECURITY_LOGGING=true  (always enabled)
# SECURITY_LOG_FILE=security_events.log  (use LOG_LEVEL and standard logging)
# FORCE_HTTPS=true  (handled by Azure App Service / nginx)
# APP_TITLE=Price Scout  (use APP_NAME instead)
# DEFAULT_THEME=dark  (handled by app/theming.py)
# DOMAIN_NAME=pricescout.example.com  (use Azure DNS or custom domain)
# SSL_CERT_PATH / SSL_KEY_PATH  (handled by Azure App Service)
# SERVER_ADDRESS=0.0.0.0  (use HOST instead)
# SERVER_PORT=8501  (use PORT instead)


# ------------------------------------------------------------------------------
# AZURE APP SERVICE (Auto-Set by Azure - DO NOT SET MANUALLY)
# ------------------------------------------------------------------------------

# These are automatically set by Azure App Service
# WEBSITE_SITE_NAME=pricescout-app-prod
# WEBSITE_INSTANCE_ID=...
# APPSETTING_WEBSITE_SITE_NAME=...
# WEBSITE_HOSTNAME=pricescout-app-prod.azurewebsites.net


# ==============================================================================
# QUICK START EXAMPLES
# ==============================================================================

# --- Local Development (SQLite) ---
# Just run the app - no configuration needed!
# Database: users.db and data/[CompanyName]/[CompanyName].db

# --- Local Development (PostgreSQL) ---
# DATABASE_URL=postgresql://postgres:password@localhost:5432/pricescout_dev

# --- Azure Production ---
# DEPLOYMENT_ENV=azure
# AZURE_KEY_VAULT_URL=https://pricescout-kv-prod.vault.azure.net/
# (All secrets fetched from Key Vault automatically)

# --- Docker Container ---
# HOST=0.0.0.0
# PORT=8000
# PLAYWRIGHT_HEADLESS=true
# DATABASE_URL=postgresql://user:pass@db-host:5432/dbname

DEFAULT_EXPORT_FORMAT=excel

# ------------------------------------------------------------------------------
# Development Settings (Only for ENVIRONMENT=development)
# ------------------------------------------------------------------------------
# Enable auto-reload
DEV_AUTO_RELOAD=true

# Show detailed error messages
DEV_SHOW_ERRORS=true

# Enable profiling
DEV_ENABLE_PROFILING=false

# ------------------------------------------------------------------------------
# Streamlit Configuration
# ------------------------------------------------------------------------------
# Port to run Streamlit on
STREAMLIT_PORT=8501

# Enable/disable server file watcher
STREAMLIT_FILE_WATCHER=true

# Enable/disable dark theme
STREAMLIT_THEME_BASE=dark

# ------------------------------------------------------------------------------
# Testing Configuration (Only for tests)
# ------------------------------------------------------------------------------
# Use in-memory database for tests
TEST_USE_MEMORY_DB=true

# Test timeout (seconds)
TEST_TIMEOUT=30

# ==============================================================================
# Example Production Configuration
# ==============================================================================
# ENVIRONMENT=production
# DEBUG_MODE=false
# LOG_LEVEL=INFO
# OMDB_API_KEY=abc123xyz789
# SCRAPE_HEADLESS=true
# CAPTURE_DEBUG_SCREENSHOTS=false
# SECRET_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6
# SESSION_TIMEOUT=60
# ==============================================================================

# ==============================================================================
# Example Development Configuration
# ==============================================================================
# ENVIRONMENT=development
# DEBUG_MODE=true
# LOG_LEVEL=DEBUG
# OMDB_API_KEY=abc123xyz789
# SCRAPE_HEADLESS=false
# CAPTURE_DEBUG_SCREENSHOTS=true
# SECRET_KEY=dev_secret_key_not_for_production
# SESSION_TIMEOUT=120
# DEV_AUTO_RELOAD=true
# DEV_SHOW_ERRORS=true
# ==============================================================================
